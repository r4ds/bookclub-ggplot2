---
title: "05-Statistical_summaries"
author: "Ryan L. Metcalf"
date: "10/3/2021"
output: ioslides_presentation
---

```{r, include = FALSE}
library(ggplot2)
```

# Statistical Summaries
## Learning Objectives
- Use ggplot2 to plot possible uncertainty in your data
- Determine which geometric object (geom) best presents your type of data
- 

## Defintions (in this Chapter)

> **discrete value**: a finite number, something that is countable with beginning and end (input user definition welcomed)

> **continous value**: infinite number, something that never ends. Infinity is continous. (input user definition welcomed)

> **grobs**: graphical object

> **overplotting**: too much data on scatterplot making underlying relationships obscure

## Revealing Uncertainty

Four primary types of geometric objects (geom) are used:
1. Discrete x, range: `geom_errorbar()`, `geom_linerange()`
2. Discrete x, range & center: `geom_crossbar()`, `geom_pointrange()`
3. Continuous x, range: `geom_ribbon()`
4. Continuous x, range & center: `geom_smooth(stat = "identity")`

```{r}
y <- c(18, 11, 16)
df <- data.frame(x = 1:3, y = y, se = c(1.2, 0.5, 1.0))

base <- ggplot(df, aes(x, y, ymin = y - se, ymax = y + se))
base + geom_crossbar()
base + geom_pointrange()
base + geom_smooth(stat = "identity")
```

```{r}
base + geom_errorbar()
base + geom_linerange()
base + geom_ribbon()
```

## Weighted Data
If each row of your dataframe contains mulitiple observations, we can use a weight to visually give scale to observations

```{r miss-basic} 
# Unweighted
ggplot(midwest, aes(percwhite, percbelowpoverty)) + 
  geom_point()
# Weight by population
ggplot(midwest, aes(percwhite, percbelowpoverty)) + 
  geom_point(aes(size = poptotal / 1e6)) + 
  scale_size_area("Population\n(millions)", breaks = c(0.5, 1, 2, 4))
```

```{r weight-lm} 
# Unweighted
ggplot(midwest, aes(percwhite, percbelowpoverty)) + 
  geom_point() + 
  geom_smooth(method = lm, size = 1)
# Weighted by population
ggplot(midwest, aes(percwhite, percbelowpoverty)) + 
  geom_point(aes(size = poptotal / 1e6)) + 
  geom_smooth(aes(weight = poptotal), method = lm, size = 1) +
  scale_size_area(guide = "none")
```

```{r weight-hist} 
ggplot(midwest, aes(percbelowpoverty)) +
  geom_histogram(binwidth = 1) + 
  ylab("Counties")
ggplot(midwest, aes(percbelowpoverty)) +
  geom_histogram(aes(weight = poptotal), binwidth = 1) +
  ylab("Population (1000s)")
```

>Question for the group: Is the above `ylab` correct? Check out the next two figures, can you see the difference?

```{r weight-hist-option-1} 
ggplot(midwest, aes(percbelowpoverty)) +
  geom_histogram(aes(weight = poptotal/1e3), binwidth = 1) +
  ylab("Population (1000s)")
```

```{r weight-hist-option-2} 
ggplot(midwest, aes(percbelowpoverty)) +
  geom_histogram(aes(weight = poptotal/1e6), binwidth = 1) +
  ylab("Population (millions)")
```

```{r fig.cap="Diamond Dimensions", echo=FALSE}
knitr::include_graphics("diagrams/diamond-dimensions.png", dpi = 300)
```
